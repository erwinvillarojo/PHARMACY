        {% load static %}
        {% block headerinclude %}

        <link href="https://fonts.googleapis.com/css?family=Roboto|Varela+Round" rel="stylesheet">
        <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
        <link rel="stylesheet" href="https://cdn.datatables.net/1.10.21/css/jquery.dataTables.min.css">
        <link rel="stylesheet" href="https://cdn.datatables.net/buttons/1.6.2/css/buttons.dataTables.min.css">
        <link rel='stylesheet'  href='/static/css/dashboard.css' />

        {% endblock headerinclude %}

        {% block footerinclude %}
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
        <script src="https://code.jquery.com/jquery-3.5.1.js"></script>
        <script src="https://cdn.datatables.net/1.10.21/js/jquery.dataTables.min.js"></script>
        <script src="https://cdn.datatables.net/buttons/1.6.2/js/dataTables.buttons.min.js"></script>
    
        <script type="text/javascript" src="https://cdn.datatables.net/buttons/1.6.2/js/dataTables.buttons.min.js"></script>
        <script type="text/javascript" src="https://cdn.datatables.net/buttons/1.6.2/js/buttons.flash.min.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
        <script type="text/javascript" src="https://cdn.datatables.net/buttons/1.6.2/js/buttons.html5.min.js"></script>
        <script type="text/javascript" src="https://cdn.datatables.net/buttons/1.6.2/js/buttons.print.min.js"></script>
     
        <script type="text/javascript" src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.18.1/moment.min.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.6.4/js/bootstrap-datepicker.min.js"></script>

        <script src="extensions/auto-refresh/bootstrap-table-auto-refresh.js"></script>

        <script>


        //date filter and pagination for MedTable
        $(document).ready(function () {
            let initialTableSettings = {
                "pageLength" : 10,
                "lengthMenu" : [[10, 20, 30, -1], [10, 20, 30, "All"]],
                dom: 'lrtBi<"posR"p>',
                buttons: [
                    'copy',
                    'excel',

                ]
            }

            $.fn.dataTable.ext.search.push(
                function (settings, data, dataIndex) {
                    var min = $('#min-date').datepicker("getDate");
                    var max = $('#max-date').datepicker("getDate");
                    // change str order before making  date object because it uses a new Date("mm/dd/yyyy") format for short date.
                    var startDate = new Date(data[0])
                    if (min == null && max == null) { return true; }
                    if (min == null && startDate <= max) { return true;}
                    if(max == null && startDate >= min) {return true;}
                    if (startDate <= max && startDate >= min) { return true; }
                    return false;
                }
            );

            $("#min-date").datepicker({ onSelect: function () { table.draw(); }, changeMonth: true, changeYear: true , dateFormat:"dd/mm/yy"});
            $("#max-date").datepicker({ onSelect: function () { table.draw(); }, changeMonth: true, changeYear: true, dateFormat:"dd/mm/yy" });
            var table = $('#myMedTable').DataTable(initialTableSettings);

            // Event listener to the two range filtering inputs to redraw on input
            $('#min-date, #max-date').change(function () {
                table.draw();
            });
        });

        //date filter and pagination for CustTable
        $(document).ready(function () {
            let initialTableSettings = {
                "pageLength" : 10,
                "lengthMenu" : [[10, 20, 30, -1], [10, 20, 30, "All"]],
                dom: 'lrtBi<"posR"p>',
                buttons: [
                    'copy',
                    'excel'
                ]
            }

            $.fn.dataTable.ext.search.push(
                function (settings, data, dataIndex) {
                    var min = $('#min').datepicker("getDate");
                    var max = $('#max').datepicker("getDate");
                    // need to change str order before making  date obect since it uses a new Date("mm/dd/yyyy") format for short date.
                    var startDate = new Date(data[0])
                    if (min == null && max == null) { return true; }
                    if (min == null && startDate <= max) { return true;}
                    if(max == null && startDate >= min) {return true;}
                    if (startDate <= max && startDate >= min) { return true; }
                    return false;
                }
            );

            $("#min").datepicker({ onSelect: function () { table.draw(); }, changeMonth: true, changeYear: true , dateFormat:"dd/mm/yy"});
            $("#max").datepicker({ onSelect: function () { table.draw(); }, changeMonth: true, changeYear: true, dateFormat:"dd/mm/yy" });
            var table = $('#myCustTable').DataTable(initialTableSettings);

            // Event listener to the two range filtering inputs to redraw on input
            $('#min, #max').change(function () {
                table.draw();
            });

        });
        //Search filter for the medTable and custTable
        $(document).ready( function () {

            $("#medInput").on("keyup", function() {
                var value = $(this).val().toLowerCase();
                $("#medData tr").filter(function() {
                    $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
                });
            });

            $("#custInput").on("keyup", function() {
                var value = $(this).val().toLowerCase();
                $("#custData tr").filter(function() {
                    $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
                });
            });

        });

        $(document).ready(function(){
            //Activate tooltip
            $('[data-toggle="tooltip"]').tooltip();
        });

        // $(document).off('.datepicker.data-api');
        // $('.datepicker').datepicker({
        //     format: 'yyyy/mm/dd'
        // });
        
        </script>
        {% endblock footerinclude %}

        {% block content %}
            <nav class="navbar navbar-inverse navbar-expand-xl navbar-dark">
                <div class="navbar-header">
                    <a class="navbar-brand" href="#"><i class="fa fa-heartbeat"></i>ABC  <b>PHARMA</b></a>          
                    <button type="button" data-target="#navbarCollapse" data-toggle="collapse" class="navbar-toggle">
                        <span class="navbar-toggler-icon"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                </div>
                <!-- Collection of nav links, forms, and other content for toggling -->
                <div id="navbarCollapse" class="collapse navbar-collapse">      
                    <ul class="nav navbar-nav navbar-right">
                        <li class="dashboard"><a href="#"><i class="fa fa-home"></i><span>Dashboard</span></a></li>
                        <li><a href="{% url 'customer:indexLanding_view' %}"><i class="fa fa-sign-out"></i><span>Log Out</span></a></li>
                    </ul>
                </div>
            </nav>

           

 <!--medicine data table starts here-->
            <datatable>
                <div class="container">
                    <div class="table-responsive">
                        <div class="table-wrapper">
                            <div class="table-title">
                                <div class="row">
                                    <div class="col-sm-8"><h2><i class="fa fa-plus-square"></i> Medicine Report Summary </h2></div>
                                </div>
                            </div>
                            <div style="float: left;">
                            <form id = "form1" action="" method="POST" autocomplete="off" enctype="multipart/form-data">
                                {% csrf_token %}
                                <p align="right"><a type ="button" href="registration_med" class="button button2" id="medicine_id" ><span>ADD MEDICINE</span></a></p>
                               
                              
                            </form>
                            </div>

                            <div class="card-body">
                                    <div class="form-inline md-form mr-auto mb-4" style="float: right;">

                                <b> FROM</b>&nbsp;
                                <input type="text" id="min-date" name="min-date" style="width: 100px;">&nbsp;&nbsp;
                                <b> TO</b>&nbsp;
                                <input id="max-date" name="max-date" type="text" style="width: 100px;">
                    
                                 <!-- SEARCH BOX -->
                                &nbsp;&nbsp;&nbsp;
                                <div class="searchbar  md-form mr-auto mb-4"  style="float: right;">
                                    <input class="search_input" type="text" name="" placeholder="Search..." id="medInput">
                                    <a href="#" class="search_icon"><i class="fa fa-search" aria-hidden="true"></i></a>
                                    <a href="#"Refresh"><i class="fa fa-refresh" aria-hidden="true"></i></a>
                                </div>
                            </div>

                            <table id="myMedTable" class="table table-striped table-hover table-bordered">
                                <thead>
                                    <tr>
                                        <th>Date Manufactured</th>
                                        <th>Expiry Date</th>
                                        <th>Generic Name</th>
                                        <th>Common Brand</i></th>
                                        <th>Size</th>
                                        <th>Price</th>                                                             
                                        <th>No. of Items</th>                                                                                  
                                        <th>Order</th> 
                                        <th>Total</th>  
                                                               
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="medData">
                                    {% for medicine in medicines %}
                                    <tr>
                                    <tr>
                                        <td>{{medicine.manufactured_date}}</td>
                                        <td>{{medicine.expiry_date}}</td>                       
                                        <td>{{medicine.generic_name}}</td>
                                        <td>{{medicine.common_brand}}</td>
                                        <td>{{medicine.size}}</td>
                                        <td>{{medicine.price}}</td>
                                        <td>{{medicine.no_of_items}}</td> 
                                        <td>{{medicine.order}}</td>
                                        <td>{{medicine.total}}</td>
                                              
                                        <td>
                                            <a href="#" class="view" data-toggle="modal" data-target="#viewMedicineModal-{{medicine.id}}"> <i class="material-icons" title="View">&#xE417;</i></a>
                                            <a href="#" class="delete" data-toggle="modal" data-target="#deleteMedicineModal-{{medicine.id}}"> <i class="material-icons" title="Delete">&#xE872;</i></a>
                                            <a href="#" class="fa fa-shopping-cart" data-toggle="modal" data-target="#orderModal-{{medicine.id}}"> <i class="material-icons" title="AddtoCart"></i></a>
                                            
                                        </td>
                                    </tr>
                                       <!-- Modal Medicine VIEW-->
                                        <div class="modal fade" id="viewMedicineModal-{{medicine.id}}" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                                          <div class="modal-dialog modal-xl" role="document">
                                            <div class="modal-content">
                                              <div class="modal-header">
                                                <h3 class="modal-title" id="exampleModalLabel">MEDICINE INFORMATION</h3>
                                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                  <span aria-hidden="true">&times;</span>
                                                </button>
                                              </div>
                                              <form id="updateForm" method="post">
                                              {% csrf_token %}
                                                <div class="modal-body">
<!--                                                      <input type="text" name="medicine-id" value = {{medicine.id}} hidden>
 -->                                                     <div class = "row">
                                                    <div class = "col-sm-4">
                                                            <label>Medicine ID</label>
                                                            <input type="number" name = "medicine-id" class="form-control" placeholder="" value = "{{medicine.id}}" readonly="readonly">
                                                        </div>
                                            
                                                        
                                                        <div class = "col-sm-4">
                                                            <label>Date Released</label>
                                                            <input type="date" class="form-control" id="id-dregistered" placeholder="" value = "{{medicine.date_registered|date:'Y-m-d'}}" readonly="readonly">
                                                        </div>
                                                        <div class = "col-sm-4">
                                                            <label>Stock Keeping Unit</label>
                                                            <input type="text" class="form-control" id="id-sku" name="medicine-sku" value = {{medicine.sku}} readonly="readonly">
                                                        </div>
                                                  </div>
                                                  <br>
                                                    <div class = "row">
                                                        <div class = "col-sm-4">
                                                            <label>Category</label>
<!--                                                             <input type="text" class="form-control" id="id-category" placeholder="" value = {{medicine.category}}>
 -->                                                            <select name="medicine-category" class="form-control" id="id-category" value={{medicine.id}} required="required" >
                                                                    <option value={{medicine.category}}>{{medicine.category}}</option>
                                                                    <option value="Antibiotics">Antibiotics</option>
                                                                    <option value="Analgesics">Analgesics</option>
                                                                    <option value="CoughSuppressants">Cough Suppressants</option>
                                                                    <option value="Decongestants ">Decongestants</option>
                                                                    <option value="Antibacterials">Antibacterials</option>
                                                                    <option value="Antacids">Antacids</option>
                                                                    <option value="Anticonvulsants">Anticonvulsants</option>
                                                                    <option value="Antidepressants">Antidepressants</option>
                                                                    <option value="Antidiarrheals">Antidiarrheals</option>
                                                                    <option value="Antihistamines">Antihistamines</option>
                                                                    <option value="Antihypertensives">Antihypertensives</option>
                                                                    <option value="Anti-Inflammatories">Anti-Inflammatories</option>
                                                                    <option value="Antineoplastics">Antineoplastics</option>
                                                                    <option value="Cold Cures">Cold Cures</option>
                                                                    <option value="Bronchodilators">Bronchodilators</option>
                                                                    <option value="Corticosteroids">Corticosteroids</option>
                                                                    <option value="Laxatives">Laxatives</option>
                                                                    <option value="Sedatives">Sedatives</option>
                                                                    <option value="Muscle Relaxants">Muscle Relaxants</option>
                                                                    <option value="Tranquilizer">Tranquilizer</option>
                                                                    <option value="Vitamins">Vitamins</option>
                                                                    <option value="Sleeping Drugs">Sleeping Drugs</option>
                                                        </select>   

                                                        </div>
                                                       <div class = "col-sm-4">
                                                            <label>Generic Name</label>
                                                            <input type="text" class="form-control" id="id-generic" name = "medicine-generic" required= "required" value = {{medicine.generic_name}}>
                                                        </div>
                                                        <div class = "col-sm-4">
                                                            <label>Common Brand</label>
                                                            <input type="text" class="form-control" id="id-common" name = "medicine-common" required= "required" value = {{medicine.common_brand}}>
                                                        </div>
                                                   </div>
                                                   <br>
                                                   <div class = "row">
                                                        <div class = "col-sm-6">
                                                            <label>Manufactured Date</label>
                                                            <input type="date" class="form-control" id="id-manufactured" name = "medicine-manufactured" required= "required" value = "{{medicine.manufactured_date |date:'Y-m-d'}}">
                                                        </div>
                                                        <div class = "col-sm-6" >
                                                            <label>Expiry Date</label>
                                                            <input type="date" class="form-control" id="id-expiry" name = "medicine-expiry" required= "required" value = "{{medicine.expiry_date|date:'Y-m-d'}}">
                                                        </div>
                                                  </div>
                                                  <br>
                                                   <div class="container-fluid">
                                                    <div class="col-sm-4">
                                                        <div class="input-group">
                                                        <input type="number" class="form-control" id="id-size" name = "medicine-size" required= "required" min="5" max="1000" maxlength="3" value = {{medicine.size}}>
                                                        <span class="input-group-addon">ml</span>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-4">
                                                        <div class="input-group">
                                                        <span class="input-group-addon">Php</span>
                                                        <input type="number" class="form-control" id="id-price" name = "medicine-price" required= "required" min="5" max="1000.99" step="0.01" maxlength="5" value = {{medicine.price}}>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-4">
                                                        <div class="input-group">
                                                        <input type="number" class="form-control" id="id-items" name = "medicine-items" required= "required"  min="5" max="1000" value = {{medicine.no_of_items}}>
                                                        <span class="input-group-addon">boxes</span>
                                                        </div>
                                                    </div>
                                                </div>
                                                <br>
                                               <div class = "row">
                                                <div class = "col-sm-12">
                                                    <label>How to Use</label>
                                                    <textarea class ="form-control" id="id-howtouse" name = "medicine-use" rows="6" col="10" required= "required">{{medicine.how_to_use}}</textarea>
                                                </div>
                                              </div>
                                              <br>
                                              <div class = "row">
                                                <div class = "col-sm-12">
                                                    <label>Side Effects</label>
                                                    <textarea class ="form-control" id="id-sideeffects" name = "medicine-effects" rows="6" col="10" required= "required">{{medicine.side_effects}}</textarea>
                                                </div>
                                              </div>
                                              <br>
                                              <label>Images</label>
                                              <div class = "row">
                                                     {% if medicine.img1.url is not null %}
                                                     <div class="col-sm-4">
                                                            <div class = "col-md-auto">
                                                                    <img src="{{ medicine.img1.url }}" width="200px" height="200px" style="border-radius: 8px; border: 2px solid;border-color: #fbda57; padding: 3px;"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                                                <input type="file" name="medicine-img1" id="img1">
                                                            </div>
                                                     </div>
                                                    {% else %}
                                                     <div class="col-sm-4">
                                                        <div class="col-md-auto">
                                                                <img src="{% static 'media/media/no-preview.jpg' %}" width="200px" height="200px" style="border-radius: 8px; border: 2px solid; border-color: #fbda57; padding: 3px;"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                                             <input type="file" name="medicine-img1" id="img1">
                                                        </div>
                                                    </div>
                                                    {% endif %}
                                                     {% if medicine.img2.url is not null %}
                                                     <div class="col-sm-4">
                                                            <div class = "col-md-auto">
                                                                    <img src="{{ medicine.img2.url }}" width="200px" height="200px" style="border-radius: 8px; border: 2px solid; border-color: #fbda57; padding: 3px;"> <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                                                <input type="file" name="medicine-img2" id="img2">
                                                            </div>
                                                     </div>
                                                    {% else %}
                                                     <div class="col-sm-4">
                                                        <div class="col-md-auto">
                                                                <img src="{% static 'media/media/no-preview.jpg' %}" width="200px" height="200px" style="border-radius: 8px; border: 2px solid; border-color: #fbda57; padding: 3px;"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                                             <input type="file" name="medicine-img2" id="img2">
                                                        </div>
                                                    </div>
                                                    {% endif %}
                                                     {% if medicine.img3.url is not null %}
                                                     <div class="col-sm-4">
                                                            <div class = "col-md-auto">
                                                                <img src="{{ medicine.img3.url }}" width="200px" height="200px" style="border-radius: 8px; border: 2px solid; border-color: #fbda57; padding: 3px;"> <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                                                <input type="file" name="medicine-img3" id="img3" >
                                                            </div>
                                                     </div>
                                                    {% else %}
                                                     <div class="col-sm-4">
                                                        <div class="col-md-auto">
                                                                <img src="{% static 'media/media/no-preview.jpg' %}" width="200px" height="200px" style="border-radius: 8px; border: 2px solid ; border-color: #fbda57; padding: 3px;"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                                             <input type="file" name="medicine-img3" id="img3">
                                                        </div>
                                                    </div>
                                                    {% endif %}
                                              </div>
                                              <br>
                                                                                                              
                                              <div class="modal-footer">
                                                <button type="submit" id = "btnUpdate"name = "btnUpdate" class="btn btn-primary">UPDATE</button>
                                                <button type="button" class="btn btn-secondary" data-dismiss="modal">CANCEL</button>
                                                
                                              </div>
                                                                                                                                
                                            </div>
                                        </form>
                                          </div>
                                        </div>
                                    </div>
                                                                                                    
                                                    
                                                                                                                    
                                                                                                                                                                                                     
                                  <!-- Order Medicine Modal -->
                                    <div class="modal fade" id="orderModal-{{medicine.id}}" tabindex="-1" role="dialog" aria-labelledby="viewModalLabel" aria-hidden="true">
                                      <div class="modal-dialog" role="document">
                                        <div class="modal-content">
                                          <div class="modal-header">
                                            <h4 class="modal-title" id="viewModalLabel">
                                              <strong>ADD TO CART</strong></h4>
                                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                              <span aria-hidden="true">&times;</span>
                                            </button>
                                          </div>

                                          <form id="purchaseForm" method="post">
                                            {% csrf_token %}
                                            <div class="modal-body">
                                              <input type="text" name="medicine-id" value="{{medicine.id}}" hidden>

                                              <div class="row">
                                                <div class = "col-sm-4">
                                                    <label>Medicine ID</label>
                                                    <input type="number" name = "medicine-id" class="form-control" placeholder="" value = "{{medicine.id}}" readonly="readonly">
                                                </div>
                                                
                                                  
                                                    <div class = "row">
                                                        <div class = "col-sm-4">
                                                            <label>Category</label>
<!--                                                             <input type="text" class="form-control" id="id-category" placeholder="" value ="{{medicine.category}}">
 -->                                                            <select name="medicine-category" class="form-control" id="id-category" value={{medicine.id}} readonly="readonly" disabled>
                                                                    <option value={{medicine.category}}>{{medicine.category}}</option>
                                                                    <option value="Antibiotics">Antibiotics</option>
                                                                    <option value="Analgesics">Analgesics</option>
                                                                    <option value="CoughSuppressants">Cough Suppressants</option>
                                                                    <option value="Decongestants ">Decongestants</option>
                                                                    <option value="Antibacterials">Antibacterials</option>
                                                                    <option value="Antacids">Antacids</option>
                                                                    <option value="Anticonvulsants">Anticonvulsants</option>
                                                                    <option value="Antidepressants">Antidepressants</option>
                                                                    <option value="Antidiarrheals">Antidiarrheals</option>
                                                                    <option value="Antihistamines">Antihistamines</option>
                                                                    <option value="Antihypertensives">Antihypertensives</option>
                                                                    <option value="Anti-Inflammatories">Anti-Inflammatories</option>
                                                                    <option value="Antineoplastics">Antineoplastics</option>
                                                                    <option value="Cold Cures">Cold Cures</option>
                                                                    <option value="Bronchodilators">Bronchodilators</option>
                                                                    <option value="Corticosteroids">Corticosteroids</option>
                                                                    <option value="Laxatives">Laxatives</option>
                                                                    <option value="Sedatives">Sedatives</option>
                                                                    <option value="Muscle Relaxants">Muscle Relaxants</option>
                                                                    <option value="Tranquilizer">Tranquilizer</option>
                                                                    <option value="Vitamins">Vitamins</option>
                                                                    <option value="Sleeping Drugs">Sleeping Drugs</option>
                                                        </select>   
                                                        </div>
                                                                                                  
                                                     <div class = "row">                                             
                                                <div class="col-sm-3">
                                                        <label>No. of items</label>
                                                        <input type="number" class="form-control" id="id-items" name = "medicine-items" required= "required"  min="5" max="1000" value = {{medicine.no_of_items}} readonly="readonly">
                                                      
                                              </div>
                                              </div>
                                              </div>
                                      
                                                <div class="col-sm-4">
                                                  {% if 0 >= medicine.no_of_items %}
                                                  <br>
                                                  <p><strong>No.of Items</strong></p><input type="text" class="form-control" id="id-noItems" placeholder="OUT OF STOCK" readonly>
                                                 
                                                  {% else %}
                                                  <br>
                                                  
                                                    <p><strong>Customer Id</strong></p>
                                                    <input type="number" class="form-control" id="id-customer" name = "customer-id" required="required">
                                                    <input type="number"  id="id-price" name = "medicine-totalPrice" value = {{medicine.price}} hidden>
                                                 
                                                  <p><strong>&nbsp; No. of Items to Order</strong></p><input type="number" class="form-control" id="id-price"  name="order" min="1" required="required">
                                                  {% endif%}
                                                </div>
                                              </div>                           
                                              <br> 
                                              
                                          
                                              </div>
                                              
                                              <div class="modal-footer">
                                                {% if not 0 >= medicine.no_of_items %}
                                                <button type="submit" id="btnOrder" name="btnOrder" class="btn btn-danger">PLACE ORDER</button>
                                                {% endif%}
                                                <button type="button" class="btn btn-primary" data-dismiss="modal">CANCEL</button>
                                              </div>
                                            </div>
                                          </form>
                                        </div>
                                      </div>
                                    </div>   
                                               
                                                                                                                  
                          
                                                  
                                    <!--Delete Medicine Modal -->
                                     <div  class="modal fade" id="deleteMedicineModal-{{medicine.id}}" >
                                            <div class="modal-dialog">
                                                <div class="modal-content">
                                                        <div class="modal-header">                      
                                                        <h3 class="modal-title">Delete Medicine</h3>
                                                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                                                            </div>
                                                            <form id="deleteForm" method="post">
                                                                {% csrf_token %}
                                                            <div class="modal-body">
                                                            <input type="text" name="medicine-id" value = {{medicine.id}} hidden>                
                                                            <p>Are you sure you want to delete these records?</p>
                                                            <p class="text-warning"><small>This action cannot be undone.</small></p>
                                                        </div>
                                                        <div class="modal-footer">
                                                            
                                                             <input type="submit" id = "btnDelete" name = "btnDelete" class="btn-danger" 
                                                                    value="Delete"></button>
                                                              <input type="button" class="btn-primary" data-dismiss="modal" value="Cancel"></button>  
                                                        </div>
                                                    </form>
                                                </div>
                                            </div>
                                    </div> 
                                    {% endfor %} 
                                </tbody>
                            </table>
                        </div>
                    </div>        
                </div> 
            </datatable>



            <!--customer data table starts here-->
            <datatable>
                
                    <div class="table-responsive">
                        <div class="table-wrapper">
                            <div class="table-title">
                                <div class="row">
                                    <div class="col-sm-8"><h2><i class="fa fa-plus-square"></i> Customer Report Summary </h2></div>
                                </div> 
                            </div>
                            <div style="float: left;">
                                <!--<p align="right"><button type="submit" class="button button2"><span>ADD MEDICINE</span></button></p>-->
                                <p align="right"><a type = "button" href="registration" class="button button1" id="customer_id"><span>ADD CUSTOMER</span></a></p>
                            </form>
                            </div>

                            <div class="card-body">
                                    <div class="form-inline md-form mr-auto mb-4" style="float: right;">
                                <b>FROM</b>&nbsp;
                                <input id="min" name="min" type="text" style="width: 100px;">&nbsp;&nbsp;
                                <b>TO</b>&nbsp;
                                <input id="max" name="max" type="text" style="width: 100px;">

                                 <!-- SEARCH BOX -->
                                &nbsp;&nbsp;&nbsp;
                                <div class="searchbar  md-form mr-auto mb-4"  style="float: right;">
                                    <input class="search_input" type="text" name="" placeholder="Search..." id="custInput">
                                    <a href="#" class="search_icon"><i class="fa fa-search" aria-hidden="true"></i></a>
                                </div>
                            </div>

                            <table id="myCustTable" class="table table-striped table-hover table-bordered">
                                <thead>
                                    <tr>
                                       
                                        <th>Date Registered</th>
                                        <th>Firstname</th>
                                        <th>Lastname</th>
                                        <th>Middlename</i></th>
                                        <th>Birthdate</th>
                                        <th>Address</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="custData">
                                    {% for customer in customers %}
                                
                                    <tr>
                                       
                                        <td>{{customer.date_registered}}</td>
                                        <td>{{customer.firstname}}</td>
                                        <td>{{customer.lastname}}</td>
                                        <td>{{customer.middlename}}</td>
                                        <td>{{customer.bdate}}</td>
                                        <td>{{customer.address}}</td>               
                                        <td>

                                            <a href="#" class="view" data-toggle="modal" data-target="#viewCustomerModal-{{customer.id}}"><i class="material-icons" 
                                               title="View">&#xE417;</i></a>
                                               
                                            <a href="#" class="delete" data-toggle="modal" data-target="#deleteCustomerModal-{{customer.id}}"><i class="material-icons" title="Delete">&#xE872;</i></a>
                                              
                                                   
                                              </button>
                                        </td>
                                    </tr>

                                       <!-- Modal Customer VIEW-->
                                        <div class="modal fade" id="viewCustomerModal-{{customer.id}}" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                                          <div class="modal-dialog" role="document">
                                            <div class="modal-content">
                                              <div class="modal-header">
                                                <h3 class="modal-title" id="exampleModalLabel">CUSTOMER INFORMATION</h3>
                                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                  <span aria-hidden="true">&times;</span>
                                                </button>
                                              </div>

                                                <form id="updateForm" method="post" >
                                                {% csrf_token %}
                                                 <div class="modal-body"> 
                                                    <div class = "row">

                                                       <input type="text" name="customer-id" value = "{{customer.id}}" hidden>

                                                        <div class = "col-sm-4">
                                                            <p>Firstname</p>
                                                            <input type="text" name="customer-firstname" maxlength="25" class="form-control" id="id-firstname"  value = "{{customer.firstname}}">
                                                        </div>

                                                         <div class = "col-sm-4">
                                                            <p>Lastname</p>
                                                            <input type="text" name="customer-lastname" maxlength="25" class="form-control" id="id-lastname" value = "{{customer.lastname}}">
                                                        </div>

                                                         <div class = "col-sm-4">
                                                            <p>Middlename</p>
                                                            <input type="text" name="customer-middlename" maxlength="25" class="form-control" id="id-middlename" value = "{{customer.middlename}}">
                                                            <br>
                                                        </div>

                                                         <div class = "col-sm-12">
                                                            <p>Address</p>
                                                            <input type="text" name="customer-address" maxlength="25" class="form-control" id="id-address" value = "{{customer.address}}">
                                                        </div>
                                                    </div>

                                                    <br>
  
                                               <div class="form-group">
                                                     <div class="row">
                                                        <div class = "col-sm-4">
                                                            <p>BirthDate</p>
                                                            <input type="date" name="customer-bdate" class="form-control" id="id-bdate" value = "{{customer.bdate}}">
                                                        </div>



                                                     <div class="col-sm-4">
                                                       <p>Gender</p><select name="customer-gender" class="form-control" id="id-gender" required="required">
                                                            <option value = '{{customer.gender}}'>{{customer.gender }}</option>
                                                            <option value="Male">Male</option>
                                                            <option value="Female">Female</option>
                                                        </select></div>

                                                         <div class = "col-sm-4">
                                                        <p>Status</p><select name="customer-status" class="form-control" id="status" >
                                                        <option value = '{{customer.status}}'>{{customer.status }}</option>
                                                        <option value="Single">Single</option>
                                                        <option value="Married">Married</option>
                                                        <option value="Widow">Widow/er</option>
                                                        <option value="Divorced">Divorced</option>
                                                        </select></div>

                                                      
                                                </div>
                                                    </div>

                                                    <div class = "row">
                                                        <div class = "col-sm-4">
                                                            <p>Spouse Name</p>
                                                            <input type="text" name="customer-spouse_name" maxlength="25" class="form-control" id="id-spouse_name" value = "{{customer.spouse_name}}">
                                                        </div>
                                                      
                                                       <div class = "col-sm-4">
                                                            <p>Spouse Occupation</p>
                                                            <input type="text" name="customer-spouse_occupation" maxlength="25"  class="form-control" id="id-spouse_occupation" value =" {{customer.spouse_occupation}}">
                                                            <br>
                                                        </div>

                                                         <div class = "col-sm-4">
                                                            <p>No of children</p>
                                                            <input type="number"  name="customer-no_children"  minimum=0 max=12 oninput="validity.valid||(value='');" class="form-control" id="id-no-children" value = "{{customer.no_children}}">
                                                        </div>
                                                

                                                    
                                                         <div class = "col-sm-6">
                                                           <p>Mother's Name</p>
                                                           <input type="text" name="customer-mothers_name" maxlength="25" class="form-control" id="id-mothers_name" value = "{{customer.mothers_name}}">
                                                        </div>

                                                    <div class = "col-sm-6">
                                                           <p>Mother's Occupation</p>
                                                           <input type="text" name="customer-mothers_occupation" maxlength="25" class="form-control" id="id-mothers_occupation" value =" {{customer.mothers_occupation}}">
                                                           <br>
                                                        </div>   


                                                    <div class = "col-sm-6">
                                                           <p>Father's Name</p>
                                                           <input type="text" name="customer-fathers_name" maxlength="25" class="form-control" id="id-fathers_name" value = "{{customer.fathers_name}}">
                                                        </div>   



                                                    <div class = "col-sm-6">
                                                           <p>Father's Occupation</p>
                                                           <input type="text"  name="customer-fathers_occupation" maxlength="25" class="form-control" id="id-fathers_occupation" value = " {{customer.fathers_occupation}}">
                                                           <br>
                                                        </div>     

                                                    <div class = "col-sm-4">
                                                           <p>Height</p>
                                                           <input type="number"  step=0.01  name="customer-height" class="form-control" id="id-height"  placeholder="height in cm. "  oninput="validity.valid||(value='');" value = "{{customer.height}}">
                                                        </div>    

                                                    <div class = "col-sm-4">
                                                           <p>Weight</p>
                                                           <input type="number"  step=0.01  name="customer-weight" class="form-control" id="id-weight"  placeholder="weight in kg."  oninput="validity.valid||(value='');" value = "{{customer.weight}}">
                                                        </div>    

                                                    <div class = "col-sm-4">
                                                           <p>Religion</p>
                                                           <input type="text" name="customer-religion" maxlength="10" class="form-control" id="id-religion"  placeholder="" value = "{{customer.religion}}">
                                                        </div>      
                                            
                                                    <br>
                                                    <br>


                                                    <div class="col-sm-4"><br>
                                                        <p>Upload Image</p>
                                                         <input type="file" name="customer-profile_pic" id="id-profile_pic" value ="{{customer.profile_pic}}"><br>
                                                         <input type="text" disabled value ="{{customer.profile_pic}}"
                                                         width="196px" height="212px" style="border-radius: 8px; border: 1px solid #white; padding: 3px;" >
                                                   </div>                                           
                                             </div>
                                                   </div>

                                             
                                              <div class="modal-footer">
                                                <button type="submit" id = "btnUpdate" name="btnUpdate"  class="btn btn-primary">UPDATE</button>
                                                <button type="button" class="btn btn-secondary" data-dismiss="modal">CANCEL</button>
                                              </div>
                                            </div>
                                           </form>
                                          </div>
                                        </div>
                           
                     
  
    <!-- Delete Modal HTML -->
    <div id="deleteCustomerModal-{{customer.id}}" class="modal fade" role="dialog">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                    <div class="modal-header">                      
                        <h3 class="modal-title">Delete Customer</h3>
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    </div>


                        <form id="deleteForm" method="post" >
                        {% csrf_token %} 
                    <div class="modal-body">    
                     <input type="text" name="customer-id" value = "{{customer.id}}" hidden>                
                        <p>Are you sure you want to delete these records?</p>
                        <p class="text-warning"><small>This action cannot be undone.</small></p>
                    </div>
                    <div class="modal-footer">
                        <input type="submit" id = "btnDelete" name = "btnDelete" class="btn-danger" value="Delete"></button>
                        <input type="button" class="btn-primary" data-dismiss="modal" value="Cancel"></button>
                    </div>
            </div>
            </form>
        </div>        
     </div>
      {% endfor %}

     </tbody>
    </table>
    </div>
</div> 
    </div> 
    </datatable>
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                    
                                                                                                                                                                                                              
                                                                                                                                                                    
     
            <!--order data table starts here-->
            <datatable>
                
                    <div class="table-responsive">
                        <div class="table-wrapper">
                            <div class="table-title">
                                <div class="row">
                                    <div class="col-sm-8"><h2><i class="fa fa-plus-square"></i> Order Report Summary </h2></div>
                                </div> 
                            </div>
                            <div style="float: left;">
                              
                            </form>
                            </div>

                            <div class="card-body">
                                    <div class="form-inline md-form mr-auto mb-4" style="float: right;">
                                <b>FROM</b>&nbsp;
                                <input id="min" name="min" type="text" style="width: 100px;">&nbsp;&nbsp;
                                <b>TO</b>&nbsp;
                                <input id="max" name="max" type="text" style="width: 100px;">

                                 <!-- SEARCH BOX -->
                                &nbsp;&nbsp;&nbsp;
                                <div class="searchbar  md-form mr-auto mb-4"  style="float: right;">
                                    <input class="search_input" type="text" name="" placeholder="Search..." id="custInput">
                                    <a href="#" class="search_icon"><i class="fa fa-search" aria-hidden="true"></i></a>
                                </div>
                            </div>

                            <table id="myCustTable" class="table table-striped table-hover table-bordered">
                                <thead>
                                    <tr>
                                       
                                        <th>Medicine Id</th>  
                                        <th>Customer Id</th>                                                                                                                         
                                        <th>Firstname</th>
                                        <th>Lastname</th>
                                        <th>Address</th>                                                  
                                        <th>Order</th>                                                                
                                        <th>Total Price</th>
                                    </tr>
                                </thead>
                                <tbody id="custData">
                                    {% for customer in customers %}
                                    {% for medicine in medicines %}
                                
                                    <tr>
                                       
                                        <td>{{medicine.id}}</td>
                                        <td>{{customer.id}}</td>
                                        <td>{{customer.firstname}}</td>
                                        <td>{{customer.lastname}}</td>
                                        <td>{{customer.address}}</td>  
                                        <td>{{medicine.order}}</td>
                                        <td>{{medicine.total}}</td>
                                        <td>

                                               
                                            <a href="#" class="delete" data-toggle="modal" data-target="#deleteCustomerModal-{{customer.id}}"><i class="material-icons" title="Delete">&#xE872;</i></a>
                                              
                                                   
                                              </button>
                                        </td>
                                    </tr>

    
                                            </div>
                                          </div>
                                        </div>
                           
                                   {% endfor %}
                                    {% endfor %}                                          

                                </tbody>
                            </table>
                        </div>
                    </div> 
                </div> 
            </datatable>                                                                                               
                                                                                               
   {% endblock content %}


